default:
  just --list

bindgen:
  uniffi-bindgen-cs src/duper.udl --config uniffi.toml --out-dir csharp

build-debug:
  cargo build

build-release:
  cargo build --release --target x86_64-unknown-linux-gnu
  cargo build --release --target x86_64-pc-windows-gnu

[working-directory: 'csharp']
package-csharp: build-release bindgen
  dotnet build
  dotnet pack

test: build-debug bindgen test-csharp

[working-directory: 'tests/csharp']
test-csharp:
  dotnet test
