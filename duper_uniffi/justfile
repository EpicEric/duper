default:
  just --list

bindgen:
  uniffi-bindgen-cs src/duper.udl --config uniffi.toml --out-dir csharp

build-debug:
  cargo build

build-release:
  cargo build --release --target x86_64-unknown-linux-gnu
  cargo build --release --target x86_64-pc-windows-gnu

[working-directory: 'csharp']
package-cs: bindgen build-release
  dotnet build
  dotnet pack

example: bindgen build-debug example-cs

[working-directory: 'example/csharp']
example-cs:
  dotnet build
  LD_LIBRARY_PATH="../../../target/debug" dotnet run
